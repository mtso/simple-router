!function(){function n(n,t){document.title=c(t),document.body.innerHTML=i(t),h.handlers[a].forEach(function(n){n()}),o.bind(this,document.body)()}function t(t){return h.handlers[d].forEach(function(n){n()}),fetch(t).then(function(n){if(200!==n.status)throw new Error("Could not get data at "+t);return n.text()}).then(n.bind(this,t)).then(o.bind(this,document.body))}function e(n){return function(e){e.defaultPrevented||e.preventDefault(),t(n).then(function(){window.scrollTo(0,0),history.pushState({path:location.href},"mtso.io",n)}).catch(console.warn)}}function o(n){u&&u.forEach(function(n){n.link.removeEventListener("click",n.handler),n.link.removeEventListener("touchend",n.handler),n.link.removeEventListener("touchcancel",n.handler)});const t=n.getElementsByTagName("a"),o=[];for(var c=0;c<t.length;c++){const i=t[c],d=i.getAttribute("href"),a=e(d);r(d)&&(i.addEventListener("click",a),i.addEventListener("touchend",a),i.addEventListener("touchcancel",a)),o.push({link:i,handler:a})}u=o}function r(n){return"/"===n||/^(\.|\/[^\/])/.test(n)}function c(n){const t=/(?:<title>)(.+)(?:(<\/title>))/.exec(n);return t&&t[1]||""}function i(n){const t=/(<body>)((.|\s)+)(<\/body>)/.exec(n);return t&&t[2]||""}const d="loadstart",a="loadend";var u;const h=window.SiteRouter={handlers:{loadstart:[],loadend:[]}};h.addEventListener=function(n,t){return h.handlers[n]=h.handlers[n]||[],h.handlers[n].includes(t)||h.handlers[n].push(t),t},h.redirect=function(n,e){e=e||{},t(n).then(function(){history.replaceState({path:location.href},e.title,n)})},window.addEventListener("load",function(n){o(document.body)}),window.addEventListener("popstate",function(n){h.handlers[d].forEach(function(n){n()}),t(location.href).catch(console.error)})}();