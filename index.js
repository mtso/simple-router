!function(){"use strict";const n="loadstart",t="loadend";var e;const o=window.SiteRouter={handlers:{loadstart:[],loadend:[]}};function r(e){return o.handlers[n].forEach(function(n){n()}),fetch(e).then(function(n){if(200!==n.status)throw new Error("Could not get data at "+e);return n.text()}).then(function(n,e){document.title=function(n){const t=/(?:<title>)(.+)(?:(<\/title>))/.exec(n);return t&&t[1]||""}(e),document.body.innerHTML=function(n){const t=/(<body>)((.|\s)+)(<\/body>)/.exec(n);return t&&t[2]||""}(e),o.handlers[t].forEach(function(n){n()}),i.bind(this,document.body)()}.bind(this,e)).then(i.bind(this,document.body))}function c(n){return function(t){t.defaultPrevented||t.preventDefault(),r(n).then(function(){window.scrollTo(0,0),history.pushState({path:location.href},"mtso.io",n)}).catch(console.warn)}}function i(n){e&&e.forEach(function(n){n.link.removeEventListener("click",n.handler),n.link.removeEventListener("touchend",n.handler),n.link.removeEventListener("touchcancel",n.handler)});const t=n.getElementsByTagName("a"),o=[];for(var r=0;r<t.length;r++){const n=t[r],e=n.getAttribute("href"),d=c(e);("/"===(i=e)||/^(\.|\/[^\/])/.test(i))&&(n.addEventListener("click",d),n.addEventListener("touchend",d),n.addEventListener("touchcancel",d)),o.push({link:n,handler:d})}var i;e=o}o.addEventListener=function(n,t){return o.handlers[n]=o.handlers[n]||[],o.handlers[n].includes(t)||o.handlers[n].push(t),t},o.redirect=function(n,t){t=t||{},r(n).then(function(){history.replaceState({path:location.href},t.title,n)})},window.addEventListener("load",function(n){i(document.body)}),window.addEventListener("popstate",function(t){o.handlers[n].forEach(function(n){n()}),r(location.href).catch(console.error)})}();
