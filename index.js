!function(){"use strict";var n=[];function t(t){n&&n.forEach(function(n){n.link.removeEventListener("click",n.handler),n.link.removeEventListener("touchend",n.handler),n.link.removeEventListener("touchcancel",n.handler)});const e=t.getElementsByTagName("a"),o=[];for(var r=0;r<e.length;r++){const n=e[r],t=n.getAttribute("href"),i=makeLinkTo(t);isSameDomain(t)&&(n.addEventListener("click",i),n.addEventListener("touchend",i),n.addEventListener("touchcancel",i)),o.push({link:n,handler:i})}n=o}const e="loadstart",o="loadend",r=window.SiteRouter={handlers:{loadstart:[],loadend:[]}};function i(n){return r.handlers[e].forEach(function(n){n()}),fetch(n).then(function(t){if(200!==t.status)throw new Error("Could not get data at "+n);return t.text()}).then(function(n,e){document.title=function(n){const t=/(?:<title>)((.|\n)+)(?:(<\/title>))/m.exec(n);return t&&t[1]||""}(e),document.body.innerHTML=function(n){const t=/(<body>)((.|\s)+)(<\/body>)/.exec(n);return t&&t[2]||""}(e),r.handlers[o].forEach(function(n){n()}),t.bind(this,document.body)()}.bind(this,n)).then(t.bind(this,document.body))}r.addEventListener=function(n,t){return r.handlers[n]=r.handlers[n]||[],r.handlers[n].includes(t)||r.handlers[n].push(t),t},r.redirect=function(n,t){t=t||{},i(n).then(function(){history.replaceState({path:location.href},t.title,n)})},window.addEventListener("load",function(n){t(document.body)}),window.addEventListener("popstate",function(n){r.handlers[e].forEach(function(n){n()}),i(location.href).catch(console.error)})}();
